<div class="container-fluid" ng-init="getApps()" style="padding:2% 5% 10% 5%; background:pink">
  <h1 style="mb-50">Admin Portal</h1>
  
  <div class="row">
    <div class="col-md-6">
      <h2>Membership/Rider applications</h2>
      
      <input type="text" id="searchInput" onkeyup="searchTable()" placeholder="Search for names..">
      <table class="table table-striped" id="membershipTable">
        <thead>
          <tr>
            <th>Date Submited</th>
            <th>Rider Name</th>
            <th>Address</th>
            <th>Phone</th>
            <!-- <th>Email</th> -->
            <th>Apple</th>
            <th>Operations</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="rider in memberFormData">
            <td>{{rider | timestamp | date}}</td>
            <td>{{rider.riderName}}</td>
            <td>{{rider.streetAddress}}, {{rider.city}}, {{rider.state}} {{rider.zip}}</td>
            <td>{{rider.primaryPhone}}</td>
            <td>Cherry</td>
            <!-- <td>{{rider.email}}</td> -->
            <td>
              <button type="button" class="btn btn-danger btn-sm" ng-click="deleteForm('memberapp', rider._id)" data-toggle="tooltip" title="Delete Form">
               <span class="glyphicon glyphicon-trash"></span>
             </button>
             <a ui-sref="view-form({formObj: {{rider}}, formType: 'memberapp'})" class="btn btn-info btn-sm" data-toggle="tooltip" title="View details">
               <span class="glyphicon glyphicon-eye-open"></span>
             </a>
             <button type="button" class="btn btn-success btn-sm" data-toggle="tooltip" title="Download PDF" ng-click="downloadPDF('memberapp', rider._id)">
               <span class="glyphicon glyphicon-download"></span>
             </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div><!--col-md-6-->
    
    <div class="col-md-6">
      <h2>Volunteer/Driver applications</h2>
      <table class="table table-striped" id="volunteer-table">
        <thead>
          <tr>
            <th>Date Submited</th>
            <th>Rider Name</th>
            <th>Address</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Operations</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="driver in volunteerFormData">
            <td>{{driver | timestamp | date}}</td>
            <td>{{driver.riderName}}</td>
            <td>{{driver.streetAddress}}, {{driver.city}}, {{driver.state}} {{driver.zip}}</td>
            <td>{{driver.homePhone}}</td>
            <td>{{driver.email}}</td>
            <td>
              <button type="button" class="btn btn-danger btn-sm" ng-click="deleteForm('volunteerapp', driver)" data-toggle="tooltip" title="Delete Form">
               <span class="glyphicon glyphicon-trash"></span>
             </button>
             <a ui-sref="view-form({formObj: {{driver}}, formType: 'volunteerapp'})" class="btn btn-info btn-sm" data-toggle="tooltip" title="View details">
               <span class="glyphicon glyphicon-eye-open"></span>
             </a>
             <button type="button" class="btn btn-success btn-sm" data-toggle="tooltip" title="Download PDF" ng-click="downloadPDF('volunteerapp', driver)">
               <span class="glyphicon glyphicon-download"></span>
             </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div><!--col-md-6-->
  </div><!--row-->
  
  
  
  <div class="row">
    <div class="col-md-6">
      <h2>Non-Rider applications</h2>
      <table class="table table-striped" id="nonrider-table">
        <thead>
          <tr>
            <th>Date Submited</th>
            <th>Rider Name</th>
            <th>Address</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Operations</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="nonrider in nonRiderFormData">
            <td>{{nonrider | timestamp | date}}</td>
            <td>{{nonrider.firstName}} {{nonrider.lastName}}</td>
            <td>{{nonrider.address1}}, {{nonrider.city}}, {{nonrider.state}} {{nonrider.zip}}</td>
            <td>{{nonrider.phone}}</td>
            <td>{{nonrider.email}}</td>
            <td>
              <button type="button" class="btn btn-danger btn-sm" ng-click="deleteForm('nonriderapp', nonrider)" data-toggle="tooltip" title="Delete Form">
               <span class="glyphicon glyphicon-trash"></span>
             </button>
             <a ui-sref="view-form({formObj: {{nonrider}}, formType: 'nonriderapp'})" class="btn btn-info btn-sm" data-toggle="tooltip" title="View details">
               <span class="glyphicon glyphicon-eye-open"></span>
             </a>
             <button type="button" class="btn btn-success btn-sm" data-toggle="tooltip" title="Download PDF" ng-click="downloadPDF('nonriderapp', nonrider)">
               <span class="glyphicon glyphicon-download"></span>
             </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div><!--col-md-6-->
    
    <div class="col-md-6">
      <h2>Contact forms</h2>
      <table class="table table-striped" id="contact-table">
        <thead>
          <tr>
            <th>Date Submited</th>
            <th>Rider Name</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Subject</th>
            <th>Operations</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="person in contactFormData">
            <td>{{person | timestamp | date}}</td>
            <td>{{person.name}}</td>
            <td>{{person.phone}}</td>
            <td>{{person.email}}</td>
            <td><strong>{{person.subject}}</strong></td>
            <td>
              <button type="button" class="btn btn-danger btn-sm" ng-click="deleteForm('contactform', person)" data-toggle="tooltip" title="Delete Form">
               <span class="glyphicon glyphicon-trash"></span>
             </button>
             <a ui-sref="view-form({formObj: {{person}}, formType: 'contactform'})" class="btn btn-info btn-sm" data-toggle="tooltip" title="View details">
               <span class="glyphicon glyphicon-eye-open"></span>
             </a>
            </td>
          </tr>
        </tbody>
      </table>
    </div><!--col-md-6-->
  </div><!--row-->
  
</div><!--container-->


<script>
  $(document).ready(function(){
      $('[data-toggle="tooltip"]').tooltip(); 
      $('#membership-table').DataTable();
      $('#volunteer-table').DataTable();
      $('#nonrider-table').DataTable();
      $('#contact-table').DataTable();
  });
  
  function searchTable() {
  // Declare variables 
  var input, filter, table, tr, td, i;
  input = document.getElementById("searchInput");
  filter = input.value.toUpperCase();
  console.log('filter is ', filter);
  table = document.getElementById("membershipTable");
  tr = table.getElementsByTagName("tr");

  // Loop through all table rows, and hide those who don't match the search query
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td")[0];
    if (td) {
      console.log('a td, which  is ', td);
      if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
        console.log('td exists ', td);
        tr[i].style.display = "";
      } else {
        tr[i].style.display = "none";
      }
    } 
  }
}
</script>

<style>
  .dashboard .row .col-md-6 {padding:2%}
  .dataTables_empty {display:none}
</style>